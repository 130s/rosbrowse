<?php
$title = "ROS stacks";
include "rosbrowse.inc";
include "load_megastack.inc";
$stacks = $xml->xpath("/stacks/stack");
?>
<table>
<tr><th>Name</th><th>Packages</th><th>Description</th></tr>
<?php
function alpha_cb($a, $b)
{
  return strcmp(strtoupper($a['name']), strtoupper($b['name']));
}
usort($stacks , "alpha_cb");
foreach($stacks as $stack)
{
  $name = (string)$stack['name'];
  $pkg_count = count($stack->package);
  $desc = (string)$stack->description['brief'];
  if (strlen($desc) < 10) // there was no brief description
  {
    $desc = (string)$stack->description;
    $desc = substr($desc, 0, 100); // make the real description brief...
    if (strlen($desc) == 100)
      $desc .= "..."; // and admit we chopped it CHOMP CHOMP
  }

  echo "<tr><td class='pkgname'>";
  echo "<a href=\"stack.php?name=" . urlencode($name) . "\">" . $name. "</a>";
  echo "</td><td>" . $pkg_count . "</td><td>" . $desc . "</td></tr>\n";
}
?>
</table>
</body>
</html>
